@tailwind base;
@tailwind components;
@tailwind utilities;

/* Light theme palette: fallback (hex) for all browsers */
:root {
  --background: #f0edec;
  --muted: #e7e0de;
  --accent: #2400e8;
  --card: #ffffff;
  --card-foreground: #0a0a0a;
  --popover: #ffffff;
  --popover-foreground: #0a0a0a;
  --secondary: #f6f6f6;
  --secondary-foreground: #1a1a1a;
  --muted-foreground: #78716c;
  --accent-foreground: #1a1a1a;
  --destructive: #dc2626;
  --destructive-foreground: #ffffff;
  --ring: #a8a29e;
  --table-border: #d9d9d9;
  --sidebar: #fafaf9;
  --sidebar-foreground: #0a0a0a;
  --sidebar-border: #e7e5e4;
}

@supports (color: color(display-p3 0 0 0)) {
  :root {
    --background: color(display-p3 0.941176 0.929412 0.92549);
    --muted: color(display-p3 0.905882 0.878431 0.870588);
    --accent: color(display-p3 0.14 0 0.91);
  }
}

@supports (color: lab(0% 0 0)) {
  :root {
    --card: lab(100% 0 0);
    --card-foreground: lab(2.75381% 0 0);
    --popover: lab(100% 0 0);
    --popover-foreground: lab(2.75381% 0 0);
    --secondary: lab(96.52% -0.0000298023 0.0000119209);
    --secondary-foreground: lab(7.78201% -0.0000149012 0);
    --muted-foreground: lab(48.496% 0 0);
    --accent-foreground: lab(7.78201% -0.0000149012 0);
    --destructive: lab(48.4493% 77.4328 61.5452);
    --destructive-foreground: lab(100% 0 0);
    --ring: lab(66.128% -0.0000298023 0.0000119209);
    --chart-1: lab(57.1026% 64.2584 89.8886);
    --chart-2: lab(55.0223% -41.0774 -3.90277);
    --chart-3: lab(30.372% -13.1853 -18.7887);
    --chart-4: lab(80.1641% 16.6016 99.2089);
    --chart-5: lab(72.7183% 31.8672 97.9407);
    --sidebar: lab(98.26% 0 0);
    --sidebar-foreground: lab(2.75381% 0 0);
    --sidebar-primary: lab(7.78201% -0.0000149012 0);
    --sidebar-primary-foreground: lab(98.26% 0 0);
    --sidebar-accent: lab(96.52% -0.0000298023 0.0000119209);
    --sidebar-accent-foreground: lab(7.78201% -0.0000149012 0);
    --sidebar-border: lab(90.952% 0 0.0000119209);
    --sidebar-ring: lab(66.128% -0.0000298023 0.0000119209);
  }
}

@layer base {
  html {
    @apply font-sans;
    color: var(--card-foreground);
    background-color: var(--background);
  }
  main {
    width: 100%;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
  }
  /* Fix preflight for linter: standard appearance + no vertical-align on block */
  button,
  input:where([type="button"]),
  input:where([type="reset"]),
  input:where([type="submit"]) {
    appearance: button;
  }
  [type="search"] {
    appearance: textfield;
  }
  iframe,
  embed,
  object {
    vertical-align: unset;
  }
}

@layer components {
  /* Центрирование таблиц: один блок на таблицу, не зависит от flex */
  .table-wrapper {
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    overflow-x: auto;
    box-sizing: border-box;
  }
  .table-wrapper--wide {
    max-width: 1000px;
  }
  .table-wrapper--mobile {
    max-width: 360px;
  }

  .metric-tag.tag-selected,
  .industry-tag.tag-selected {
    border-color: var(--accent);
    background: color-mix(in srgb, var(--accent) 20%, transparent);
  }

  .metric-tag:hover:not(.tag-selected),
  .industry-tag:hover:not(.tag-selected) {
    border-color: var(--accent);
    background: color-mix(in srgb, var(--accent) 18%, var(--background));
  }

  .footer-email-tooltip {
    position: absolute;
    left: 50%;
    bottom: 100%;
    transform: translate(-50%, -6px);
    padding: 6px 10px;
    font-size: 0.75rem;
    line-height: 1.2;
    color: var(--card-foreground);
    background: var(--muted);
    border-radius: 6px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    pointer-events: none;
  }
  .footer-email-tooltip.is-visible {
    opacity: 1;
    visibility: visible;
  }
}
